<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html lang="zh-tw">
	<head>
		<meta charset="utf-8">
		<meta name="google-signin-client_id" content="65164552845-kt5nqknig8520gtv3o66aqej0t5a2pfp.apps.googleusercontent.com">
		<script src="/CoreScripts/jquery.min.js"></script>
		<style>
			.login_icon { 
				position:absolute;
				width:185px;
				height:35px;
				top:60px;
				left:5px;
			}

			.login_id { 
				position:absolute;
				width:200px;
				height:15px;
				top:90px;
				left:8px;
			}   

			.login_container { 
				margin-top:5px; 
				margin-left:5px; 
				margin-right:auto; 
				margin-bottom:30px; 
				border: 1px solid 000000; 
			}
			.align_left{
				text-align: left;	
			}
		</style>
	</head>
	<body>
		<p>當前版本: 1.0.0.10</p>
		<div class="login_container">
			<div class="login_icon" id="my-signin2"></div>
			<div class="login_id align_left"><p id="user_title">尚未登入</p></div>
		</div>
		
		<script>
			// google login render icon
			function renderButton(){
				gapi.signin2.render('my-signin2', {
					'scope': 'profile email',
					'width': 200,
					'height': 40,
					'longtitle': true,
					'theme': 'dark',
					'onsuccess': onSuccess,
					'onfailure': onFailure
				});
			};

			// google login event
			function onSuccess( googleUser ){
				user_email = googleUser.getBasicProfile().getEmail();
				user_id = user_email.substring( 0, user_email.indexOf("@") );
				document.getElementById("user_title").innerHTML = "Hello"+ " " + user_id;
				var link_name = "menu.html?" + user_id;
				window.open( link_name, "frame_menu" );
			};

			// google login failure report
			function onFailure(error){
				alert(JSON.stringify( error ) );
			};
		</script>
		<script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
	</body>
</html>
